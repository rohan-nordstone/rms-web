"use client"

import { useState } from "react"
import { usePathname, useRouter, useSearchParams } from "next/navigation"

import { createQueryString } from "@/lib/util_functions/createQueryString"
import parseSearchParams from "@/lib/util_functions/parseSearchParams"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"

export default function JobSearchInputs() {
  const router = useRouter()
  const pathname = usePathname()
  const searchParams = useSearchParams()

  const [position, setPosition] = useState<string>(
    parseSearchParams(searchParams.get("position") || "")
  )
  const [location, setLocation] = useState<string>(
    parseSearchParams(searchParams.get("location") || "")
  )
  const [stationName, setStationName] = useState<string>(
    parseSearchParams(searchParams.get("stationName") || "")
  )

  const handleSearch = () => {
    const newSearchParams = [
      { name: "position", value: position },
      { name: "location", value: location },
      { name: "stationName", value: stationName },
      { name: "page", value: "1" },
    ]

    const queryString = createQueryString(searchParams, newSearchParams)
    router.push(pathname + "?" + queryString)
  }

  return (
    <div className="grid flex-1 gap-4 py-12 sm:grid-cols-2 md:grid-cols-4">
      <div className="min-w-80 min-h-16 flex gap-3 overflow-hidden rounded-[15px] bg-white shadow">
        <svg
          width="26"
          height="22"
          viewBox="0 0 26 22"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="ml-5 h-full"
        >
          <path
            id="Vector"
            d="M0.272949 19.3581C0.272949 16.5788 0.272949 13.7994 0.272949 11.0135C0.299169 11.0201 0.318835 11.0201 0.345055 11.0266C4.22565 12.318 8.10625 13.6093 11.9803 14.9072C12.544 15.0973 13.0946 15.1039 13.6584 14.9203C17.48 13.6421 21.3081 12.3704 25.1297 11.0987C25.2084 11.0725 25.2936 11.0463 25.3788 11.0201C25.3854 11.0725 25.3919 11.0987 25.3919 11.125C25.3919 13.7798 25.3985 16.4411 25.3788 19.0959C25.3788 19.463 25.2805 19.8497 25.1232 20.184C24.5726 21.3377 23.6286 21.8818 22.3504 21.8753C16.0116 21.8687 9.67946 21.8753 3.34072 21.8753C3.22928 21.8753 3.11129 21.8753 2.99985 21.8687C1.78717 21.8228 0.699028 20.9575 0.37783 19.7842C0.345055 19.6465 0.31228 19.5023 0.272949 19.3581ZM0.272949 9.34853C0.292614 9.36164 0.318835 9.37475 0.3385 9.38131C4.39608 10.7317 8.45366 12.0885 12.5178 13.4258C12.721 13.4913 12.9767 13.4848 13.1799 13.4192C17.185 12.0951 21.1901 10.7579 25.1953 9.42719C25.3592 9.37475 25.3985 9.29609 25.3985 9.13222C25.3919 8.45049 25.3919 7.77532 25.3919 7.09359C25.3919 5.31717 24.1661 4.08482 22.3897 4.08482C20.6985 4.08482 19.0073 4.08482 17.3095 4.08482C17.2178 4.08482 17.1195 4.08482 17.0146 4.08482C17.0146 3.74396 17.0211 3.45553 17.0146 3.16056C17.008 2.98357 17.008 2.80003 16.9752 2.62304C16.7655 1.62012 15.9527 0.951502 14.9038 0.944947C13.5207 0.931837 12.1376 0.938392 10.7545 0.944947C10.6103 0.944947 10.4595 0.958057 10.3153 0.984277C9.3386 1.19404 8.67654 1.9872 8.65032 2.98357C8.63721 3.33754 8.65032 3.69807 8.65032 4.07827C8.51921 4.07827 8.42089 4.07827 8.32256 4.07827C6.60514 4.07827 4.88771 4.07171 3.17029 4.07827C1.87238 4.09793 0.784244 4.89109 0.40405 6.11033C0.35161 6.27421 0.31228 6.43809 0.272949 6.60196C0.272949 7.51967 0.272949 8.43738 0.272949 9.34853ZM10.7479 3.05568C12.1311 3.05568 13.5142 3.05568 14.917 3.05568C14.917 3.38998 14.917 3.71774 14.917 4.07171C13.5338 4.07171 12.1573 4.07171 10.7479 4.07171C10.7479 3.72429 10.7479 3.40309 10.7479 3.05568Z"
            fill="#828282"
          />
        </svg>
        <Input
          value={position}
          onChange={(e) => setPosition(e.target.value)}
          className="h-full w-full border-none bg-transparent px-0 text-lg font-light leading-relaxed text-neutral-500 focus-visible:ring-0"
          placeholder="Job title, or specialization"
        />
      </div>
      <div className="min-w-80 min-h-16 flex gap-3 overflow-hidden rounded-[15px] bg-white shadow">
        <svg
          width="22"
          height="27"
          viewBox="0 0 22 27"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="ml-5 h-full"
        >
          <path
            id="Vector"
            d="M0.230957 10.9733C0.230957 5.96011 3.02981 2.04802 7.30536 0.688378C13.4697 -1.28018 19.8916 2.22319 21.0421 8.53759C21.6431 11.8074 20.8274 14.7519 18.6725 17.3294C16.363 20.0904 14.0106 22.8263 11.6839 25.579C11.0572 26.3214 10.4047 26.3214 9.76939 25.579C7.36546 22.7429 4.93578 19.9235 2.5662 17.0541C0.977891 15.1439 0.256713 12.9085 0.230957 10.9733ZM10.7224 6.14362C8.43864 6.15196 6.60136 7.9537 6.60994 10.1725C6.61853 12.3663 8.48157 14.143 10.7567 14.1346C13.0147 14.1263 14.8691 12.3162 14.852 10.1224C14.8348 7.92033 12.9803 6.13528 10.7224 6.14362Z"
            fill="#828282"
          />
        </svg>
        <Input
          value={location}
          onChange={(e) => setLocation(e.target.value)}
          className="h-full w-full border-none bg-transparent px-0 text-lg font-light leading-relaxed text-neutral-500 focus-visible:ring-0"
          placeholder="Area, city, or town"
        />
      </div>
      <div className="min-w-80 min-h-16 flex gap-3 overflow-hidden rounded-[15px] bg-white shadow">
        <svg
          width="21"
          height="27"
          viewBox="0 0 21 27"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="ml-5 h-full"
        >
          <path
            id="Vector"
            d="M1.34163 26.1376C1.30351 26.1124 1.25903 26.0872 1.22091 26.062C0.890524 25.8858 0.725329 25.5521 0.801573 25.2247C0.88417 24.8722 1.17008 24.633 1.5513 24.633C2.30103 24.6267 3.05711 24.6267 3.80684 24.633C3.98474 24.633 4.06734 24.5889 4.13087 24.4127C5.77011 19.7982 7.40935 15.1837 9.06129 10.5755C9.11847 10.4118 9.09306 10.3048 8.97869 10.1726C8.35604 9.46124 8.21626 8.64914 8.59747 7.78668C8.9914 6.89904 9.72842 6.43319 10.7005 6.43948C11.6663 6.45207 12.3842 6.93052 12.7655 7.80557C13.1276 8.64914 12.9942 9.44865 12.3906 10.1474C12.2635 10.2922 12.2381 10.4055 12.3016 10.5944C13.9409 15.1837 15.5801 19.773 17.2066 24.3623C17.2829 24.5763 17.3782 24.6393 17.6006 24.633C18.2995 24.6204 19.0047 24.6267 19.7036 24.6267C20.1611 24.6267 20.4661 24.8407 20.555 25.2247C20.6376 25.5836 20.4597 25.8921 20.0467 26.0998C20.034 26.1061 20.0277 26.125 20.0149 26.1376C13.7884 26.1376 7.56819 26.1376 1.34163 26.1376ZM10.7069 20.5347C9.32179 21.8567 7.89858 23.2165 6.43724 24.6078C9.29002 24.6078 12.0793 24.6078 14.8685 24.6078C14.8812 24.5889 14.8939 24.57 14.9066 24.5511C13.4771 23.1914 12.0538 21.8253 10.7069 20.5347ZM10.6815 18.2306C11.3422 17.5759 11.9776 16.9527 12.6003 16.3169C12.6511 16.2665 12.6638 16.1469 12.6384 16.0776C12.0538 14.4157 11.463 12.7474 10.8657 11.0917C10.8467 11.0288 10.7386 10.9595 10.6751 10.9595C10.6116 10.9595 10.5099 11.0351 10.4909 11.098C9.89361 12.76 9.30273 14.422 8.71819 16.0839C8.69278 16.1469 8.70549 16.2602 8.74996 16.3043C9.37897 16.9464 10.0207 17.5759 10.6815 18.2306ZM9.53146 19.326C9.04223 18.8413 8.553 18.3628 8.07012 17.8844C7.54277 19.3449 7.00907 20.8369 6.46266 22.373C7.51736 21.3216 8.53394 20.3144 9.53146 19.326ZM13.2801 17.8592C12.7845 18.3502 12.2953 18.8287 11.8251 19.2945C12.8353 20.2955 13.8646 21.3153 14.8876 22.3289C14.3475 20.8432 13.8138 19.3449 13.2801 17.8592ZM18.9348 7.31453C18.166 2.99593 14.2967 0.0560157 9.88726 0.440031C7.94305 0.610005 6.25934 1.37174 4.8806 2.72524C2.91733 4.65161 2.06594 6.99347 2.36457 9.72564C2.44716 10.4748 2.65683 11.205 2.96181 11.8975C3.10794 12.2375 3.41291 12.4075 3.77507 12.3571C4.09911 12.3193 4.37867 12.0675 4.40408 11.7276C4.41679 11.545 4.36596 11.3435 4.30242 11.1736C4.03557 10.4811 3.86402 9.76342 3.83225 9.02686C3.76236 7.34601 4.25795 5.83513 5.30629 4.51941C6.60243 2.88891 8.31156 2.00127 10.4083 1.91314C12.1873 1.83759 13.7757 2.3727 15.1227 3.54363C16.6348 4.85935 17.4354 6.52132 17.5307 8.51064C17.5751 9.48013 17.3718 10.4055 17.0097 11.3058C16.8318 11.7464 17.016 12.1619 17.4227 12.3193C17.8293 12.4767 18.2423 12.2815 18.4265 11.8409C18.8395 10.8462 19.0555 9.81378 19.0937 8.73098C19.0365 8.26513 19.0174 7.78668 18.9348 7.31453ZM13.8456 4.46904C12.2063 3.27293 10.3892 3.07148 8.52758 3.88358C6.76763 4.65161 5.75105 6.04287 5.42066 7.91259C5.24911 8.88836 5.4016 9.83267 5.77646 10.7392C5.90354 11.054 6.22122 11.2302 6.54525 11.1988C6.87564 11.1673 7.17426 10.9281 7.20603 10.6007C7.22509 10.4055 7.18061 10.1852 7.11072 9.99005C6.32923 7.74261 7.63172 5.45741 9.97621 4.97896C12.1619 4.532 14.3666 6.23173 14.4809 8.44769C14.5127 9.06463 14.3729 9.6438 14.176 10.2167C14.0362 10.6133 14.2458 11.0162 14.6334 11.1484C15.021 11.2869 15.434 11.1106 15.5928 10.7203C15.8724 10.0467 16.0185 9.34792 16.0122 8.69321C15.9613 6.9557 15.2434 5.48259 13.8456 4.46904Z"
            fill="#828282"
          />
        </svg>
        <Input
          value={stationName}
          onChange={(e) => setStationName(e.target.value)}
          className="h-full w-full border-none bg-transparent px-0 text-lg font-light leading-relaxed text-neutral-500 focus-visible:ring-0"
          placeholder="Station name or category"
        />
      </div>
      <Button
        onClick={handleSearch}
        className="ml-auto flex min-h-[68px] w-full items-center justify-center gap-4 rounded-[15px] border border-white border-opacity-50 text-lg font-bold leading-relaxed md:max-w-[206px]"
      >
        <svg
          width="26"
          height="26"
          viewBox="0 0 26 26"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            id="Union"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M11.2061 0.298096C5.09346 0.298096 0.138184 5.25337 0.138184 11.366C0.138184 17.4786 5.09346 22.4339 11.2061 22.4339C13.7688 22.4339 16.1281 21.5629 18.0041 20.1008L22.7074 24.8042C23.242 25.3388 24.1088 25.3388 24.6435 24.8042C25.1781 24.2695 25.1781 23.4027 24.6435 22.8681L19.9403 18.1648C21.4028 16.2887 22.274 13.9291 22.274 11.366C22.274 5.25337 17.3187 0.298096 11.2061 0.298096ZM2.87623 11.366C2.87623 6.76555 6.60564 3.03615 11.2061 3.03615C15.8065 3.03615 19.536 6.76555 19.536 11.366C19.536 15.9665 15.8065 19.6959 11.2061 19.6959C6.60564 19.6959 2.87623 15.9665 2.87623 11.366Z"
            fill="white"
          />
        </svg>
        Search
      </Button>
    </div>
  )
}
